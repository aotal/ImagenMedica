{
  "hash": "74d245a80544ac9ea6bdf17a272fa41c",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: LARGE LANGUAGE MODELS (LLM) APLICADOS AL ENTORNO MÉDICO\ndate: '2025-02-10'\ncategories:\n  - Presentación\nimage: img/portada_llm.png\nauthor: '[Antonio Otal Palacín](antonio.otal@udl.cat)'\ninstitute: Hospital Universitari Arnau de Vilanova (Lleida)\nlang: es\nformat:\n  revealjs:\n    logo: 'https://cdn0.iconfinder.com/data/icons/modern-ui-glyph-1/64/modern-ui-glyph-1-03-512.png'\n    footer-logo-link: /\n    footer: '[IAMED](https://cv.udl.cat/portal/site/100794-2324/tool/3d5c2c81-a50b-43ce-a0bf-ecbfd152350b)'\n    css: styles.css\n    number-sections: false\n    slide-number: false\n    center: false\nfilters:\n  - reveal-header\n---\n\n## Índice\n\n-   Introducción breve a los LLM\n-   Embedding Systems\n-   Fine-Tuning y Retrieval Augmentation Generation (RAG)\n-   Ejemplo de RAG según la estructuración de los datos\n-   Knowledge Graphs\n-   Límites de los LLM\n\n::: notes\nNotes\n:::\n\n# Introducción breve a los LLM\n\n::: notes\nNotes\n:::\n\n## LLM\n\n![](img/llm.gif){fig-align=\"center\"}\n\n::: notes\nNotes\n:::\n\n## LLM Pretraining\n\nA una velocidad de 1000 millones de operaciones por segundo entrenar a GPT3 nos costaría 100 millones de años.\n\nSe hubiese tenido que empezar a entrenar el modelo en el cretácico.\n\n::: notes\nNotes\n:::\n\n## LLM Reinforcement Learning with Human Feedback\n\n![](img/pretraining.gif){fig-align=\"center\"}\n\n::: notes\nNotes\n:::\n\n## LLM GPU\n\n![](img/gpu.gif){fig-align=\"center\"}\n\n::: notes\nNotes\n:::\n\n## TRANSFORMERS\n\n::: columns\n::: {.column width=\"20%\"}\n\n![](img/transformer.jpg){.absolute top=200left=0 width=\"200\" height=\"200\"}\n![](img/qrcode_transformers.png){.absolute top=350 left=0 width=\"200\" height=\"200\"}\n![](img/deeplearningai.png){.absolute top=550 left=0 width=\"200\"}\n\n:::\n\n::: {.column width=\"80%\"}\n<p style=\"font-size: 30px;\">**Codificaciones posicionales**: Los transformers agregan un número a cada palabra para indicar su posición en la oración. Esto ayuda al modelo a comprender el orden de las palabras, lo cual es crucial para el significado.\n</p>\n<p style=\"font-size: 30px;\">**Atención**: Permite al modelo considerar todas las palabras de la oración al traducir o analizar una palabra específica. Esto ayuda a capturar relaciones complejas entre palabras y mejora la precisión de la traducción y la comprensión.\n</p>\n<p style=\"font-size: 30px;\">**Autoatención**: Permite al modelo comprender una palabra en el contexto de las palabras que la rodean, lo que ayuda a desambiguar palabras con múltiples significados y captar matices del lenguaje.\n</p>\n\n:::\n:::\n\n\n::: notes\nNotes\n:::\n\n# Vector Embedding \n\n## EMBEDDING\n\n\n<blockquote cite=\"\">\n    *Vector embeddings* son representaciones numéricas de información, como texto, documentos, imágenes o audio. Capturan el significado semántico de la información\n  </blockquote>\n\n\n\n::: notes\nNotes\n:::\n\n## VECTORES\n\n\n![](img/vectores.gif)\n\n\n\n::: notes\nNotes\n:::\n\n## Datos estructurados\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {#3f6016ae .cell execution_count=1}\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>A_id</th>\n      <th>Size</th>\n      <th>Weight</th>\n      <th>Sweetness</th>\n      <th>Crunchiness</th>\n      <th>Juiciness</th>\n      <th>Ripeness</th>\n      <th>Acidity</th>\n      <th>Quality</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0.0</td>\n      <td>-3.970049</td>\n      <td>-2.512336</td>\n      <td>5.346330</td>\n      <td>-1.012009</td>\n      <td>1.844900</td>\n      <td>0.329840</td>\n      <td>-0.491590483</td>\n      <td>good</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1.0</td>\n      <td>-1.195217</td>\n      <td>-2.839257</td>\n      <td>3.664059</td>\n      <td>1.588232</td>\n      <td>0.853286</td>\n      <td>0.867530</td>\n      <td>-0.722809367</td>\n      <td>good</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2.0</td>\n      <td>-0.292024</td>\n      <td>-1.351282</td>\n      <td>-1.738429</td>\n      <td>-0.342616</td>\n      <td>2.838636</td>\n      <td>-0.038033</td>\n      <td>2.621636473</td>\n      <td>bad</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>3.0</td>\n      <td>-0.657196</td>\n      <td>-2.271627</td>\n      <td>1.324874</td>\n      <td>-0.097875</td>\n      <td>3.637970</td>\n      <td>-3.413761</td>\n      <td>0.790723217</td>\n      <td>good</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>4.0</td>\n      <td>1.364217</td>\n      <td>-1.296612</td>\n      <td>-0.384658</td>\n      <td>-0.553006</td>\n      <td>3.030874</td>\n      <td>-1.303849</td>\n      <td>0.501984036</td>\n      <td>good</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>3996</th>\n      <td>3996.0</td>\n      <td>-0.293118</td>\n      <td>1.949253</td>\n      <td>-0.204020</td>\n      <td>-0.640196</td>\n      <td>0.024523</td>\n      <td>-1.087900</td>\n      <td>1.854235285</td>\n      <td>good</td>\n    </tr>\n    <tr>\n      <th>3997</th>\n      <td>3997.0</td>\n      <td>-2.634515</td>\n      <td>-2.138247</td>\n      <td>-2.440461</td>\n      <td>0.657223</td>\n      <td>2.199709</td>\n      <td>4.763859</td>\n      <td>-1.334611391</td>\n      <td>bad</td>\n    </tr>\n    <tr>\n      <th>3998</th>\n      <td>3998.0</td>\n      <td>-4.008004</td>\n      <td>-1.779337</td>\n      <td>2.366397</td>\n      <td>-0.200329</td>\n      <td>2.161435</td>\n      <td>0.214488</td>\n      <td>-2.229719806</td>\n      <td>good</td>\n    </tr>\n    <tr>\n      <th>3999</th>\n      <td>3999.0</td>\n      <td>0.278540</td>\n      <td>-1.715505</td>\n      <td>0.121217</td>\n      <td>-1.154075</td>\n      <td>1.266677</td>\n      <td>-0.776571</td>\n      <td>1.599796456</td>\n      <td>good</td>\n    </tr>\n    <tr>\n      <th>4000</th>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Created_by_Nidula_Elgiriyewithana</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<p>4001 rows × 9 columns</p>\n</div>\n```\n:::\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n![](img/DatosEstructurados1.jpg){fig-align=\"right\"}\n:::\n:::\n\n::: notes\nNotes\n:::\n\n## Ejemplos de datos estructurados\n\n-   Registros Electrónicos de Salud\n-   Datos de Laboratorio Clínico\n\n## Datos no estructurados\n\n::: columns\n::: {.column width=\"50%\"}\n-   Texto\n-   Imágenes\n-   Audio\n-   Video\n-   ...\n:::\n\n::: {.column width=\"50%\"}\n![](img/DatosNoEstructurados1.jpg)\n:::\n:::\n\n::: notes\nNotes\n:::\n\n## Datos semiestructurados\n\n::: columns\n::: {.column width=\"50%\"}\n![](https://www.diegocalvo.es/wp-content/uploads/2017/11/datos_semiestructurados.png)\n:::\n\n::: {.column width=\"50%\"}\n![](https://www.dicomstandard.org/images/librariesprovider2/default-album/dicom-logo.jpg?sfvrsn=7e5f288b_2)\n:::\n:::\n\n::: notes\nNotes\n:::\n\n## Por naturaleza de los datos\n\n-   Categóricos\n-   Numéricos\n-   Temporales\n-   Espaciales\n\n::: notes\nNotes\n:::\n\n## Por granularidad de los datos\n\n-   **Datos a nivel de instancia**: Datos individuales que representan observaciones o eventos específicos, como registros de pacientes o imágenes médicas.\n-   **Datos a nivel de atributo**: Datos que representan características o atributos de las instancias, como la edad, el peso o los síntomas clínicos.\n\n::: notes\nNotes\n:::\n\n## Fuente de los datos\n\n-   **Datos primarios**: Datos recopilados directamente de la fuente original, como registros médicos electrónicos (EHR) o resultados de pruebas de laboratorio.\n\n-   **Datos secundarios**: Datos que han sido recopilados o procesados por terceros, como conjuntos de datos disponibles en repositorios públicos o bases de datos comerciales.\n\n::: notes\nNotes\n:::\n\n## Datos anotados vs no anotados\n\n-   **Estructura semántica**: Los datos anotados tienen metadatos adicionales que proporcionan contexto y significado, como las etiquetas que marcan entidades nombradas.\n\n-   **Interoperabilidad y procesabilidad**: Los datos anotados son más interoperables y procesables, lo que facilita su integración con otros sistemas y su procesamiento automatizado.\n\n-   **Facilidad de búsqueda y recuperación**: Los datos anotados son más fáciles de buscar y recuperar, ya que las anotaciones permiten identificar elementos específicos.\n\n::: notes\nNotes\n:::\n\n# Anotación de datos\n\n![](https://www.shaip.com/wp-content/uploads/2023/05/Data-Annotation-New-Images-03.jpg)\n\n## ¿Qué es la anotación de datos?\n\nLa anotación de datos es el proceso de atribución o etiquetado de datos para ayudar a los algoritmos de aprendizaje automático a comprender y clasificar la información que procesan.\n\n-   Texto\n-   Imágenes\n-   Audio\n-   Video\n\n## Anotación de imágenes\n\n::: columns\n::: {.column width=\"50%\"}\n-   Clasificación\n-   Reconocimiento/Detección\n-   Segmentación\n:::\n\n::: {.column width=\"50%\"}\n![](https://www.shaip.com/wp-content/uploads/2021/08/page-8-1.jpg)\n\n[VGG](https://www.robots.ox.ac.uk/~vgg/software/via/via_demo.html)\n:::\n:::\n\n## Anotación de audio\n\n![](https://macgence.com/wp-content/uploads/2023/08/Audio-Annotation-801x299.webp)\n\n## Anotación de video\n\n![](https://www.shaip.com/wp-content/uploads/2022/02/page-3.jpg)\n\n## Anotación de texto\n\n::: columns\n::: {.column width=\"50%\"}\n-   Semántica\n-   Intención\n-   Opinión\n\n[tabula](http://tabula.ondata.it/)\n:::\n\n::: {.column width=\"50%\"}\n![](https://www.datasciencecentral.com/wp-content/uploads/2021/10/9489155876.png)\n:::\n:::\n\n# Privacidad y confidencialidad\n\n![](img/RGPD.png){fig-align=\"center\"}\n\n# Registros electrónicos de salud (EHR)\n\n## Antecedentes\n\n::: columns\n::: {.column width=\"50%\"}\n![](img/HistoriaClinica1.jpg)\n:::\n\n::: {.column width=\"50%\"}\n![](img/HistoriaClinica2.jpg)\n:::\n:::\n\n::: notes\nNotes\n:::\n\n## Problemas de la historia clínica en papel\n\n-   Accesibilidad limitada\n\n-   Riesgo de pérdida o daño\n\n-   Dificultad para mantener actualizada la información\n\n-   Espacio de almacenamiento y organización\n\n-   Limitaciones en la compartición y colaboración\n\n::: notes\nNotes\n:::\n\n## Componentes de los EHR\n\n-   Módulos de Registro y Documentación\n\n-   Pedidos y Resultados de laboratorio\n\n-   Gestión de Medicamentos\n\n-   Integración de Imágenes Médicas (PACS)\n\n::: notes\nNotes\n:::\n\n## SAP 1\n\n![](img/SAP_1.png)\n\n::: notes\nNotes\n:::\n\n## SAP 2\n\n![](img/SAP_2.png)\n\n::: notes\nNotes\n:::\n\n## SAP 3\n\n![](img/SAP_3.png)\n\n::: notes\nNotes\n:::\n\n## ARIA\n\n![](img/ARIA.PNG)\n\n::: notes\nNotes\n:::\n\n# Preprocesado de datos médicos\n\n![](img/ProcesadoDeDatos1.png){fig-align=\"center\"}\n\n::: notes\nNotes\n:::\n\n## Limpieza de datos\n\n-   Eliminación de observaciones incompletas\n-   Imputación de valores\n-   Análisis de patrones de datos faltantes\n-   Uso de modelos predictivos\n-   Técnicas de imputación múltiple\n\n::: notes\nNotes\n:::\n\n## Normalización de variables continuas\n\n-   Las variables continuas pueden tener diferentes escalas y rangos de valores\n-   La normalización ayuda a mitigar este problema al transformar las variables para que estén en una escala similar\n\n::: notes\nNotes\n:::\n\n## Técnicas de normalización\n\n-   Datos con una media de 0 y desviación estándar 1\n-   Normalización min-max (0-1)\n-   Puede mejorar la convergencia\n\n::: callout-warning\nEs importante aplicar la misma transformación de normalización tanto al conjunto de entrenamiento como al conjunto de prueba para evitar sesgos en los datos.\n:::\n\n::: notes\nNotes\n:::\n\n## Integración de datos\n\n-   Fuentes de Datos Diversas\n-   Resolución de inconsistencias\n-   Limpieza de Datos\n-   Gestión de Datos Temporales\n\n::: notes\nNotes\n:::\n\n## La ingeniería de características\n\n-   Creación de Nuevas características\n-   Selección de Características Relevantes\n\n::: notes\nPor ejemplo el índice de masa corporal\n:::\n\n## Anonimización de los datos\n\n-   La anonimización es el proceso de eliminar o modificar datos personales de tal manera que ya no sea posible identificar a un individuo a partir de los datos.\n\n-   La anonimización está vinculada a lo que dicen las leyes de protección de datos en la UE (RGPD)\n\n::: notes\nNotes\n:::\n\n## Técnicas de anonimización\n\n-   Eliminación de identificadores directos\n-   Pseudonimización\n-   Enmascaramiento\n-   Agregación\n\n::: notes\nNotes\n:::\n\n## Consideraciones al elegir una técnica de anonimización\n\n-   El tipo de datos que se procesan\n-   El nivel de riesgo de reidentificación\n-   Los fines para los que se utilizarán los datos anonimizados\n\n::: notes\nNotes\n:::\n\n## *Data Augmentation*\n\nEs una técnica que consiste en crear nuevas muestras de datos a partir de datos existentes. Estas nuevas muestras se generan mediante la aplicación de transformaciones predefinidas a los datos originales\n\n![](https://dawn.cs.stanford.edu/assets/img/2017-08-11-tanda/data_aug_basic.png)\n\n::: notes\nNotes\n:::\n\n## Ventajas de *Data Augmentation*\n\n-   Aumenta el tamaño del conjunto de datos\n-   Mejora la generalización del modelo\n-   Reduce el sesgo del modelo\n\n::: notes\nNotes\n:::\n\n## *Data Augmentation* en imágenes médicas\n\n-   Rotaciones\n-   Zoom\n-   Cambio de contraste\n-   Adición de ruido\n-   Simulación de artefactos\n\n::: notes\nNotes\n:::\n\n## *Data Augmentation* en señales biomédicas\n\nComo el Electrocardiograma o el Electroencefalograma\n\n-   Adición de ruido\n-   Cambio de escala\n-   Segmentación de señales\n-   Simulación de artefactos\n\n# Vectorizaciones (*Embeddings*)\n\n## Ángulo entre dos vectores\n\n![](https://www.mathsisfun.com/algebra/images/dot-product-ex2.gif){fig-align=\"center\"}\n\n## ¿Qué son las vectorizaciones?\n\n![](https://daleonai.com/images/word2vec.png){fig-align=\"center\"}\n\n## Práctica\n\n[Notebook](https://colab.research.google.com/drive/17hAP1ePCEOxDMREzNHQi1SwT0FYNa42n?usp=sharing)\n\n[juego](https://colab.research.google.com/drive/1r3e5MLJ7KuIF55yXr4L4bWxSh5udQ9rx?usp=sharing)\n\n",
    "supporting": [
      "LLMs_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}